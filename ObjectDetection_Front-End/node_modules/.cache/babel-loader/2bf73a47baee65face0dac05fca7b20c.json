{"ast":null,"code":"export default {\n  name: 'HomePage',\n\n  data() {\n    return {\n      projects: [],\n      configs: [],\n      video_feed: 'http://127.0.0.1:8000/video_feed/0',\n      object_detection: 'http://127.0.0.1:8000/object_detection/',\n      input_data: ['Plant', 'Proje Adı', 'Kamera IP', 'Kamera Tipi', 'Kullanıcı Adı', 'Kullanıcı Şifre', 'Model Adı']\n    };\n  },\n\n  methods: {\n    goToProject(event, index) {\n      if (event.target.className !== 'change-text') {\n        this.$router.push({\n          name: 'Project',\n          params: {\n            id: index\n          }\n        });\n      }\n    },\n\n    popUpAdd() {\n      // document.querySelector('.pop-up-card .update').style.display = null\n      document.querySelector('.add').style.display = 'flex';\n    },\n\n    popUpUpdate() {\n      // document.querySelector('.pop-up-card .add').style.display = null\n      document.querySelector('.update').style.display = 'flex';\n    },\n\n    popUpClose(event) {\n      if (event.target.className.split(' ')[0] === 'pop-up-card') {\n        document.querySelectorAll('.pop-up-card').forEach(element => {\n          element.style.display = 'none';\n        });\n      }\n    },\n\n    showconfig() {\n      document.querySelectorAll('.configupdate').forEach(element => {\n        element.style.display = 'flex';\n      });\n    },\n\n    addProject() {\n      fetch('http://127.0.0.1:8000/get_projects', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          plant: document.querySelector('[name=\"' + this.input_data[0] + '\"]').value,\n          name: document.querySelector('[name=\"' + this.input_data[1] + '\"]').value,\n          cameraIP: document.querySelector('[name=\"' + this.input_data[2] + '\"]').value,\n          cameraType: document.querySelector('[name=\"' + this.input_data[3] + '\"]').options[document.querySelector('[name=\"' + this.input_data[3] + '\"]').selectedIndex].value,\n          userName: document.querySelector('[name=\"' + this.input_data[4] + '\"]').value,\n          userPassword: document.querySelector('[name=\"' + this.input_data[5] + '\"]').value,\n          modelName: document.querySelector('[name=\"' + this.input_data[6] + '\"]').options[document.querySelector('[name=\"' + this.input_data[6] + '\"]').selectedIndex].value\n        })\n      }).then(response => response.json()).then(data => {\n        alert(data);\n        location.reload();\n      });\n    },\n\n    updateProject() {\n      fetch('http://127.0.0.1:8000/get_configs', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          projectID_id: document.querySelector('[name=\"projectconfigupdate\"]').options[document.querySelector('[name=\"projectconfigupdate\"]').selectedIndex].attributes.name.value,\n          configKeyID_id: document.querySelector('[name=\"configupdate\"]').options[document.querySelector('[name=\"configupdate\"]').selectedIndex].attributes.name.value,\n          configValue: document.querySelector('[name=\"newconfigvalue\"]').value\n        })\n      }).then(response => response.json()).then(data => {\n        alert(data);\n        location.reload();\n      });\n    }\n\n  },\n\n  created() {\n    fetch('http://127.0.0.1:8000/get_projects', {\n      method: 'GET'\n    }).then(response => response.json()).then(data => {\n      this.projects = data; // console.log(data)\n    });\n    fetch('http://127.0.0.1:8000/get_configs', {\n      method: 'GET'\n    }).then(response => response.json()).then(data => {\n      this.configs = data;\n    });\n    const url = 'ws://127.0.0.1:8081/ws/socket-server/';\n    const chatSocket = new WebSocket(url);\n\n    chatSocket.onmessage = function (e) {\n      const data = JSON.parse(e.data);\n      var parser = JSON.parse(data.message.replaceAll('\\'', '\"')); // const html = '<div class=\"butons\"><span class=\"status\"></span><span style=\"margin-left: 3px;margin-right: 6px;\">OK</span></div>'\n      // console.log('Data:', parser[0])\n\n      if (data.type === 'chat') {\n        const messages = document.querySelectorAll('.ok-nok .butons .status');\n        const OkNok = document.querySelectorAll('.ok-nok .butons .text');\n\n        if (parser[0].PollyIsIn[parser[0].PollyIsIn.length - 1] === 'True') {\n          messages[0].style.backgroundColor = 'red';\n          OkNok[0].innerText = 'NOK';\n        } else {\n          messages[0].style.backgroundColor = 'green';\n          OkNok[0].innerText = 'OK';\n        }\n\n        if (parser[0].PollyIsIn[parser[0].PollyIsIn.length - 2] === 'True') {\n          messages[1].style.backgroundColor = 'red';\n          OkNok[1].innerText = 'NOK';\n        } else {\n          messages[1].style.backgroundColor = 'green';\n          OkNok[1].innerText = 'OK';\n        }\n      }\n    };\n  },\n\n  mounted() {\n    if (Number(document.querySelector('.middle').offsetHeight) < Number(window.innerHeight)) {\n      document.querySelector('.middle').style.height = window.innerHeight - document.querySelector('.navbar').offsetHeight + 'px';\n    } // window.onload = function () {\n    //   setInterval(() => {\n    //     document.getElementsByClassName('mini-image')[0].src = 'http://127.0.0.1:8000/video_feed_single/0'\n    //     console.log('Çalıştı')\n    //   }, 1000)\n    // }\n\n  }\n\n};","map":{"version":3,"mappings":"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","names":["name","data","projects","configs","video_feed","object_detection","input_data","methods","goToProject","event","index","target","className","$router","push","params","id","popUpAdd","document","querySelector","style","display","popUpUpdate","popUpClose","split","querySelectorAll","forEach","element","showconfig","addProject","fetch","method","headers","body","JSON","stringify","plant","value","cameraIP","cameraType","options","selectedIndex","userName","userPassword","modelName","then","response","json","alert","location","reload","updateProject","projectID_id","attributes","configKeyID_id","configValue","created","url","chatSocket","WebSocket","onmessage","e","parse","parser","message","replaceAll","type","messages","OkNok","PollyIsIn","length","backgroundColor","innerText","mounted","Number","offsetHeight","window","innerHeight","height"],"sourceRoot":"","sources":["C:\\Users\\Harun\\Desktop\\ObjectDetection_app\\ObjectDetection_Front-End\\src\\components\\Home\\Homepage.vue"],"sourcesContent":["<template>\n  <div class=\"middle\">\n    <div class=\"card\">\n      <div v-for=\"(item,index) in projects\" class=\"cards\" @click=\"goToProject($event, index)\" :key=\"index\">\n        <div class=\"cards-inside\">\n          <div class=\"header\">\n            <h3>{{item.name}}</h3>\n            <div class=\"span\">Project Active<span style=\"position: absolute;background-color: green;width: 8px;height: 8px;border-radius: 100%;margin-left: 5px;margin-top: 4px;\"></span></div>\n          </div>\n          <div class=\"body\">\n            <div>\n              <div><p>Bypass Active<span style=\"color: green;font-size: 18px\">&#10003;</span></p></div>\n              <!-- <div style=\"width: 100%\"><img class=\"mini-image\" src=\"\" width=\"50%\" height=\"100\" style=\"object-fit: contain\"><img class=\"mini-image\" src=\"\" width=\"50%\" height=\"100\" style=\"object-fit: contain\"></div> -->\n              <div><p>Process Result</p><div class=\"ok-nok\">\n                  <div class=\"butons\" style=\"background: none;margin 0; padding: 0;width: fit-content;\" v-for=\"item in 2\" :key=\"item\">\n                      <span class=\"status\" style=\"width: 5px;height: 5px;\"></span><span style=\"font-size: 14px;font-weight: 400;color: black;\" class=\"text\">OK</span>\n                  </div>\n              </div></div>\n              <div><p>Last Process Time:</p><span style=\"font-weight: 400\">19.02.2022 10:32</span></div>\n              <div><p>Kamera IP:</p> </div>\n              <div><p>Plc IP:</p> </div>\n            </div>\n          </div>\n          <!-- <div class=\"run-stop\">\n            <div class=\"change\">\n              <p class=\"change-text\">RUN</p>\n            </div>\n          </div> -->\n        </div>\n      </div>\n      <div class=\"add-project\">\n      <div class=\"change\">\n        <p class=\"change-text\" @click=\"popUpAdd\">Proje Ekle +</p>\n        <p class=\"change-text\" @click=\"popUpUpdate\">Proje Güncelle +</p>\n      </div>\n      <div class=\"pop-up-card add\" @click=\"popUpClose($event)\">\n        <div class=\"cards-card\">\n            <div class=\"body\">\n              <div class=\"items\">\n                <div class=\"head\" style=\"padding: 16px;\">\n                    <!-- <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-plus-circle\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\"></line><line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\"></line></svg>\n                    <span></span> -->\n                </div>\n                <div class=\"inputs\">\n                  <div class=\"input\" v-for=\"item in input_data\" :key=\"item\">\n                    <div style=\"margin: 0;padding: 0;display: flex;align-items: center;justify-content: space-between;\"><span style=\"font-weight: 400;margin-right: 5px\">{{item}}:</span><template v-if=\"item == 'Plant'\"><input type=\"number\" min=\"0\" :name=\"item\"></template><template v-else-if=\"item == 'Model Adı'\"><select style=\"width: 201px;height: 30px;\" :name=\"item\"><option value=\"Fast-Rcnn\">Fast-Rcnn</option><option value=\"Ssd\">Ssd</option><option value=\"Mask-Rcnn\">Mask-Rcnn</option></select></template><template v-else-if=\"item == 'Kamera Tipi'\"><select style=\"width: 201px;height: 30px;\" :name=\"item\"><option value=\"ipCamera\">IP Kamera</option></select></template><template v-else><input type=\"text\" :name=\"item\"></template></div>\n                  </div>\n                </div>\n                <div class=\"inputs\" style=\"border-top: 1px solid #ada9a930;grid-template-columns: auto auto auto\">\n                  <div class=\"input\" v-for=\"item,index in configs\" :key=\"index\">\n                    <div style=\"margin: 0;padding: 0;display: flex;align-items: center;justify-content: space-between;\"><span style=\"font-weight: 400;margin-right: 5px\">{{item.configName}}:</span><template v-if=\"item == 'Plant'\"><input type=\"number\" min=\"0\" :name=\"item\"></template><template v-else-if=\"item == 'Model Adı'\"><select style=\"width: 201px;height: 30px;\" :name=\"item\"><option value=\"Fast-Rcnn\">Fast-Rcnn</option><option value=\"Mask-Rcnn\">Mask-Rcnn</option></select></template><template v-else-if=\"item == 'Kamera Tipi'\"><select style=\"width: 201px;height: 30px;\" :name=\"item\"><option value=\"ipCamera\">IP Kamera</option></select></template><template v-else><input type=\"text\" :name=\"item\"></template></div>\n                  </div>\n                </div>\n                <div class=\"send kaydet\">\n                    <p @click=\"addProject\">EKLE</p>\n                </div>\n              </div>\n            </div>\n        </div>\n      </div>\n      <div class=\"pop-up-card update\" @click=\"popUpClose($event)\">\n        <div class=\"cards-card\">\n            <div class=\"body\">\n              <div class=\"items\">\n                <div class=\"head\" style=\"padding: 16px;\">\n                    <!-- <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-stop-circle\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><rect x=\"9\" y=\"9\" width=\"6\" height=\"6\"></rect></svg>\n                    <span>Proje Güncelle</span> -->\n                </div>\n                <div class=\"inputs\" style=\"grid-template-columns: auto auto auto;margin: 0\">\n                  <div class=\"input\" style=\"padding: 0\">\n                    <select style=\"width: 221px;height: 30px;\" @change=\"showconfig\" name=\"projectconfigupdate\">\n                        <option value=\"default\" selected=\"true\" disabled=\"disabled\" hidden>Proje Şeçin</option>\n                        <option v-for=\"item,index in projects\" :key=\"index\" :name=\"item.projectID\">{{item.name}}</option>\n                    </select>\n                  </div>\n                  <div class=\"input configupdate\" style=\"display: none;padding: 0;\">\n                    <select style=\"width: 221px;height: 30px;\" name=\"configupdate\">\n                        <option value=\"default\" selected=\"true\" disabled=\"disabled\" hidden>Değiştirilece Ayarı Şeçin</option>\n                        <option v-for=\"item,index in configs\" :key=\"index\" :name=\"item.configKeyID\">{{item.configName}}</option>\n                    </select>\n                  </div>\n                  <div class=\"input configupdate\" style=\"display: none;padding: 0\">\n                    <div style=\"margin: 0;padding: 0;display: flex;align-items: center;justify-content: space-between;\"><span style=\"font-weight: 400;font-size: 16px;margin-right: 5px\">Yeni Değer:</span><input type=\"text\" name=\"newconfigvalue\"></div>\n                  </div>\n                </div>\n                <div class=\"send update\">\n                    <p @click=\"updateProject\">GÜNCELLE</p>\n                </div>\n              </div>\n            </div>\n        </div>\n      </div>\n    </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'HomePage',\n  data () {\n    return {\n      projects: [],\n      configs: [],\n      video_feed: 'http://127.0.0.1:8000/video_feed/0',\n      object_detection: 'http://127.0.0.1:8000/object_detection/',\n      input_data: ['Plant', 'Proje Adı', 'Kamera IP', 'Kamera Tipi', 'Kullanıcı Adı', 'Kullanıcı Şifre', 'Model Adı']\n    }\n  },\n  methods: {\n    goToProject (event, index) {\n      if (event.target.className !== 'change-text') {\n        this.$router.push({\n          name: 'Project',\n          params: { id: index }\n        })\n      }\n    },\n    popUpAdd () {\n      // document.querySelector('.pop-up-card .update').style.display = null\n      document.querySelector('.add').style.display = 'flex'\n    },\n    popUpUpdate () {\n      // document.querySelector('.pop-up-card .add').style.display = null\n      document.querySelector('.update').style.display = 'flex'\n    },\n    popUpClose (event) {\n      if (event.target.className.split(' ')[0] === 'pop-up-card') {\n        document.querySelectorAll('.pop-up-card').forEach(element => {\n          element.style.display = 'none'\n        })\n      }\n    },\n    showconfig () {\n      document.querySelectorAll('.configupdate').forEach(element => {\n        element.style.display = 'flex'\n      })\n    },\n    addProject () {\n      fetch('http://127.0.0.1:8000/get_projects', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          plant: document.querySelector('[name=\"' + this.input_data[0] + '\"]').value,\n          name: document.querySelector('[name=\"' + this.input_data[1] + '\"]').value,\n          cameraIP: document.querySelector('[name=\"' + this.input_data[2] + '\"]').value,\n          cameraType: document.querySelector('[name=\"' + this.input_data[3] + '\"]').options[document.querySelector('[name=\"' + this.input_data[3] + '\"]').selectedIndex].value,\n          userName: document.querySelector('[name=\"' + this.input_data[4] + '\"]').value,\n          userPassword: document.querySelector('[name=\"' + this.input_data[5] + '\"]').value,\n          modelName: document.querySelector('[name=\"' + this.input_data[6] + '\"]').options[document.querySelector('[name=\"' + this.input_data[6] + '\"]').selectedIndex].value\n        })\n      })\n        .then(response => response.json())\n        .then(data => {\n          alert(data)\n          location.reload()\n        })\n    },\n    updateProject () {\n      fetch('http://127.0.0.1:8000/get_configs', {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          projectID_id: document.querySelector('[name=\"projectconfigupdate\"]').options[document.querySelector('[name=\"projectconfigupdate\"]').selectedIndex].attributes.name.value,\n          configKeyID_id: document.querySelector('[name=\"configupdate\"]').options[document.querySelector('[name=\"configupdate\"]').selectedIndex].attributes.name.value,\n          configValue: document.querySelector('[name=\"newconfigvalue\"]').value\n        })\n      })\n        .then(response => response.json())\n        .then(data => {\n          alert(data)\n          location.reload()\n        })\n    }\n  },\n  created () {\n    fetch('http://127.0.0.1:8000/get_projects', {\n      method: 'GET'\n    })\n      .then(response => response.json())\n      .then(data => {\n        this.projects = data\n        // console.log(data)\n      })\n    fetch('http://127.0.0.1:8000/get_configs', {\n      method: 'GET'\n    })\n      .then(response => response.json())\n      .then(data => {\n        this.configs = data\n      })\n    const url = 'ws://127.0.0.1:8081/ws/socket-server/'\n\n    const chatSocket = new WebSocket(url)\n\n    chatSocket.onmessage = function (e) {\n      const data = JSON.parse(e.data)\n      var parser = JSON.parse(data.message.replaceAll('\\'', '\"'))\n      // const html = '<div class=\"butons\"><span class=\"status\"></span><span style=\"margin-left: 3px;margin-right: 6px;\">OK</span></div>'\n      // console.log('Data:', parser[0])\n\n      if (data.type === 'chat') {\n        const messages = document.querySelectorAll('.ok-nok .butons .status')\n        const OkNok = document.querySelectorAll('.ok-nok .butons .text')\n        if (parser[0].PollyIsIn[parser[0].PollyIsIn.length - 1] === 'True') {\n          messages[0].style.backgroundColor = 'red'\n          OkNok[0].innerText = 'NOK'\n        } else {\n          messages[0].style.backgroundColor = 'green'\n          OkNok[0].innerText = 'OK'\n        }\n        if (parser[0].PollyIsIn[parser[0].PollyIsIn.length - 2] === 'True') {\n          messages[1].style.backgroundColor = 'red'\n          OkNok[1].innerText = 'NOK'\n        } else {\n          messages[1].style.backgroundColor = 'green'\n          OkNok[1].innerText = 'OK'\n        }\n      }\n    }\n  },\n  mounted () {\n    if (Number(document.querySelector('.middle').offsetHeight) < Number(window.innerHeight)) {\n      document.querySelector('.middle').style.height = (window.innerHeight - document.querySelector('.navbar').offsetHeight) + 'px'\n    }\n    // window.onload = function () {\n    //   setInterval(() => {\n    //     document.getElementsByClassName('mini-image')[0].src = 'http://127.0.0.1:8000/video_feed_single/0'\n    //     console.log('Çalıştı')\n    //   }, 1000)\n    // }\n  }\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}